<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WebSocket测试</title>
</head>
<body>
    <div id="messages"></div>
    <script>
        // 创建WebSocket连接
        const socket = new WebSocket('ws://123.207.68.207:8282');

        // 连接建立时的处理
        socket.onopen = function(event) {
            console.log('WebSocket连接已建立');
            appendMessage('WebSocket连接已建立');
            socket.send(JSON.stringify({type: 0, uid: '40900'}));
            socket.send(JSON.stringify({type: 119, uid: '40900',pid:'4'}));
        };

        // 接收消息的处理
        socket.onmessage = function(event) {
            console.log('收到消息:', event.data);
            appendMessage('收到消息: ' + event.data);
            socket.send(JSON.stringify({type: 119, uid: '40900',pid:'4'}));
        };

        // 连接关闭时的处理
        socket.onclose = function(event) {
            console.log('WebSocket连接已关闭');
            appendMessage('WebSocket连接已关闭');
        };

        // 发生错误时的处理
        socket.onerror = function(error) {
            console.error('WebSocket错误:', error);
            appendMessage('WebSocket错误: ' + error);
        };

        // 在页面上显示消息的辅助函数
        function appendMessage(message) {
            const messagesDiv = document.getElementById('messages');
            const messageElement = document.createElement('div');
            messageElement.textContent = message;
            messagesDiv.appendChild(messageElement);
        }
    </script>
</body>
</html>
